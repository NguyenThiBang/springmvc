<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/admin-layout :: head(title='Quản lý danh mục')}">
    <title>Quản trị - Danh mục</title>
</head>
<body class="d-flex flex-column min-vh-100">
    <nav th:replace="~{fragments/admin-layout :: admin-navbar}"></nav>
    
    <div class="container-fluid flex-grow-1">
        <div class="row h-100">
            <div class="col-md-3 col-lg-2 p-0">
                <div th:replace="~{fragments/admin-layout :: admin-sidebar}"></div>
            </div>
            <div class="col-md-9 col-lg-10 admin-content">
                <div th:replace="~{fragments/admin-layout :: admin-alerts}"></div>
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Quản lý danh mục</h2>
                <a class="btn btn-primary" th:href="@{/admin/categories}"><i class="fas fa-sync-alt me-2"></i>Làm mới</a>
            </div>
            <form th:action="@{${category.id != null} ? '/admin/categories/' + ${category.id} + '/update' : '/admin/categories/add'}"
      th:object="${category}" method="post" class="row g-3 mb-4">

    <div class="col-md-5">
        <input type="text" class="form-control" th:field="*{name}" placeholder="Tên danh mục" required>
    </div>
    <div class="col-md-5">
        <input type="text" class="form-control" th:field="*{description}" placeholder="Mô tả">
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-success w-100">
            <i class="fas" th:classappend="${category.id != null} ? 'fa-save me-2' : 'fa-plus me-2'"></i>
            <span th:text="${category.id != null} ? 'Cập nhật' : 'Thêm'"></span>
        </button>
    </div>
</form>

            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Tên danh mục</th>
                            <th>Mô tả</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="cat, iterStat : ${categories}">
                            <td th:text="${iterStat.index + 1}"></td>
                            <td th:text="${cat.name}"></td>                            <td th:text="${cat.description}"></td>
                           
                            <td>
                                <form th:action="@{/admin/categories/{id}/delete(id=${cat.id})}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirmDelete('Bạn có chắc chắn muốn xóa danh mục này?')">
                                        <i class="fas fa-trash"></i>
                                        
                                    </button>
                                </form>
                                <a th:href="@{/admin/categories/{id}/edit(id=${cat.id})}" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
                                <form th:action="@{/admin/categories/{id}/toggle-status(id=${cat.id})}" method="post" class="d-inline" >
                                    <button type="submit" class="btn btn-sm" >
                                       
                                </form>
                            </td>
                            
                            
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{fragments/admin-layout :: admin-footer}"></footer>
<div th:replace="~{fragments/admin-layout :: admin-scripts}"></div>
</body>
</html>
